services:
  # Node.js Express application with hot reloading
  backend-nodejs:
    build: 
      context: ./backend
      dockerfile: dockerfile.dev
    container_name: backend-nodejs-dev
    restart: unless-stopped
    environment:
      - NODE_ENV=development
      - PORT=25565
    ports:
      - "25565:25565"  # Expose Node.js directly
    volumes:
      # Mount source code for hot reloading
      - ./backend:/app
      # Mount static files for live updates
      - ./public:/app/public
      # Mount views directory
      - ./views:/app/views
      # Prevent node_modules from being overwritten
      - /app/node_modules
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
